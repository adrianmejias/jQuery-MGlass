!function(a){a.mglass=function(b,c){var d={large:"example-large.jpg"},f=a(b);settings={},settings=a.extend({},d,c),settings.largeImage=a("<img>").attr("src",settings.large);var g=new Image;g.src=settings.large;var h=f.width(),i=f.height();f.css("border-top-width"),f.wrap(a("<div>").addClass("mglass-wrapper").css({width:parseInt(h)+"px",height:parseInt(i)+"px"}).mousemove(function(b){var c=a(this).find(".mglass-viewer"),d=a(this).find("img"),e={x:a("body").offset().left,y:a("body").offset().top},f={x:a(d).offset().left,y:a(d).offset().top};if(f.x<=b.clientX+e.x&&f.y<=b.clientY+e.y&&f.x+d.outerWidth()>=b.clientX+e.x&&f.y+d.outerHeight()>=b.clientY+e.y){var h=b.clientX+e.x,i=b.clientY+e.y;c.css({visibility:"visible",left:h-c.outerWidth()/2+"px",top:i-c.outerHeight()/2+"px"});var j=h-f.x,k=i-f.y,l=j*(g.width-c.outerWidth())/d.outerWidth(),m=k*(g.height-c.outerHeight())/d.outerHeight();c.css("background-position",-l+"px "+-m+"px")}else c.css("visibility","hidden")}).hover(function(){},function(b){var c=a(this).find(".mglass-viewer"),d=a(this).find("img"),e={x:a("body").offset().left,y:a("body").offset().top},f={x:a(d).offset().left,y:a(d).offset().top};f.x<=b.clientX+e.x&&f.y<=b.clientY+e.y&&f.x+d.outerWidth()>=b.clientX+e.x&&f.y+d.outerHeight()>=b.clientY+e.y||c.css("visibility","hidden")})).wrap(a("<div>").addClass("mglass-photo-box").css({width:parseInt(h)+"px",height:parseInt(i)+"px"})).parent().parent().prepend(a("<div>").addClass("mglass-viewer").css("background-image","url("+settings.large+")"))},a.fn.mglass=function(b){return this.each(function(){if(void 0===a(this).data("mglass")){var c=new a.mglass(this,b);a(this).data("mglass",c)}})}}(jQuery);